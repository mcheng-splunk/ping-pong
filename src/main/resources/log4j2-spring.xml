<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN">

    <!-- Read values from Spring Boot properties -->
    <Properties>
        <Property name="appName">${spring:spring.application.name:-ping-pong}</Property>
        <Property name="environment">${spring:app.env:-dev}</Property>
        <Property name="language">${spring:app.language:-java}</Property>
        <!--<Property name="sourcetype">${spring:app.sourcetype:-springboot:json}</Property>-->
    </Properties>

    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <JsonLayout compact="true" eventEol="true">

                <!-- Custom fields -->
                <KeyValuePair key="application" value="${appName}"/>
                <KeyValuePair key="environment" value="${environment}"/>
                <KeyValuePair key="language" value="${language}"/>
                <!--<KeyValuePair key="sourcetype" value="${sourcetype}"/>-->

                <!-- Splunk / OpenTelemetry correlation (optional) -->
                <KeyValuePair key="trace_id" value="${ctx:trace_id}"/>
                <KeyValuePair key="span_id" value="${ctx:span_id}"/>
                <KeyValuePair key="service.name" value="${ctx:service.name}"/>
                <KeyValuePair key="trace_sampled" value="${ctx:trace_flags}"/>

                <!-- Common useful fields -->
                <KeyValuePair key="thread" value="${threadName}"/>
                <KeyValuePair key="logger" value="${logger}"/>
                <KeyValuePair key="level" value="${level}"/>

            </JsonLayout>
        </Console>
    </Appenders>

    <Loggers>
        <!-- Reduce framework noise -->
        <Logger name="org.springframework" level="info"/>
        <Logger name="org.apache" level="warn"/>

        <Root level="info">
            <AppenderRef ref="Console"/>
        </Root>
    </Loggers>

</Configuration>
